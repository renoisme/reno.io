<!DOCTYPE html>
<html>

<head>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }

        #dice,
        #fortune {
            font-size: 50px;
            text-align: center;
            margin-top: 20%;
            transition: all 0.5s ease;
        }

        .container {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid #000;
            padding: 10%;
            background-color: #fff;
        }

        .container button {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        button {
            padding: 10px 20px;
            border: none;
            background-color: #007BFF;
            color: #fff;
            font-size: 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        #home-button {
            position: absolute;
            top: 10px;
            left: 10px;
        }
    </style>
</head>

<body>
    <button id="home-button" onclick="window.location.href='index.html'">ホームに戻る</button>
    <button id="dice-button" onclick="rollDice()">サイコロを振る</button>
    <button id="fortune-button" onclick="drawFortune()" style="margin-left:10px;">おみくじを引く</button>
    <div id="dice-container" class="container">
        <button onclick="closeContainer('dice')">✖</button>
        <div id="dice"></div>
    </div>
    <div id="fortune-container" class="container">
        <button onclick="closeContainer('fortune')">✖</button>
        <div id="fortune"></div>
    </div>

    <script>
        var originalBackgroundColor = document.body.style.backgroundColor;

        function rollDice() {
            var dice = document.getElementById('dice');
            var result = Math.floor(Math.random() * 6) + 1;

            dice.textContent = result;

            openContainer('dice');
        }

        function drawFortune() {
            var fortunes = ["大吉", "中吉", "小吉", "末吉", "大当たり"];
            var fortune = document.getElementById('fortune');

            var result = fortunes[Math.floor(Math.random() * (fortunes.length - 1))]; // Exclude "大当たり" from the random selection
            fortune.textContent = result;

            if (result === "大当たり") {
                fortune.style.fontSize = "90px";
                document.body.style.backgroundColor = "red";
                var intervalId = setInterval(function () {
                    document.body.style.backgroundColor = document.body.style.backgroundColor === "red" ? "orange" : "red";
                }, 100);
                setTimeout(function () {
                    clearInterval(intervalId);
                    document.body.style.backgroundColor = originalBackgroundColor;
                }, 3000);
            } else {
                fortune.style.fontSize = "50px";
            }

            openContainer('fortune');
        }

        function openContainer(containerId) {
            var container = document.getElementById(containerId + '-container');
            container.style.display = 'block';

            // Disable the buttons
            document.getElementById('dice-button').disabled = true;
            document.getElementById('fortune-button').disabled = true;
        }

        function closeContainer(containerId) {
            var container = document.getElementById(containerId + '-container');
            container.style.display = 'none';

            // Enable the buttons
            document.getElementById('dice-button').disabled = false;
            document.getElementById('fortune-button').disabled = false;

            // Reset the background color if necessary
            if (document.body.style.backgroundColor !== originalBackgroundColor) {
                document.body.style.backgroundColor = originalBackgroundColor;
            }
        }
    </script>
</body>

</html>
